# MPU6050_MotionTracking_ProofofConcept
-------------------
About
-------------------

Contributors: Rupin Raj Kumar Pradeep

Project Description: WPI ECE556 Deep Learning On Embedded Devices class project.

Characterize motions into 5 general categories (similar to existing work) of walking, standing, sitting, going upstairs, and going downstairs using 6 MPU6050s placed on the body.

--------------------
Features
--------------------

Includes an Eclipse IDE project generated by the MAXIM_SDK and further edited for input handling and processing. Also includes data for training and testing assuming orientation and position generally matches.

The main code solution is meant to run on a MAX78000FTHR board connected to 6 MPU6050s and a HM-10 or HM-20 BlueTooth module as seen in the wiring diagram presented further down.

--------------------
Required Materials
--------------------

-1 MAX78000FTHR

-6 MPU6050

-1 Breadboard or custom PCB

-30 very long (preferably custom cut) male-to-female wires (for IMU connection to PCB)

-10 short male-to-female wires (for MAX78000FTHR connection to PCB)

-4 short female-to-female wires (typically comes with HM-20 to connect to MAX78000 FTHR

-1 micro-USB to USB A cable with data transfer

-1 Arduino UNO for preliminary data gathering or testing if required

-2 rolls of Velcro strap

-A power source (Arduino kit 9V battery with power supply module is suitable)

-An iPhone with the app BluetoothLE Bluetooth Terminal by Lukas Pistrol
Is it trustworthy? I don't know, but other bluetooth terminals place a character limit at 8 or 16 character transfers

--------------------
Resources and References
--------------------

-Device setup resources and auto-generated deep learning code

https://github.com/analogdevicesinc/MaximAI_Documentation/tree/main/MAX78000_Feather

https://github.com/analogdevicesinc/ai8x-synthesis/blob/develop/README.md

https://analogdevicesinc.github.io/msdk/USERGUIDE/

-Input handling code resources

https://github.com/ElectronicCats/mpu6050/blob/master/src/MPU6050.cpp

https://invensense.tdk.com/wp-content/uploads/2015/02/MPU-6000-Register-Map1.pdf

https://jake-carter.github.io/msdk/Libraries/PeriphDrivers/Documentation/MAX78002/group__i2c.html#gabe385d2386e3828c8ee1843eefb2bdb8

https://jake-carter.github.io/msdk/Libraries/PeriphDrivers/Documentation/MAX32520/group__gpio.html#ga52f006c09ca33ca8ffb2aad1402406a9

https://jake-carter.github.io/msdk/Libraries/PeriphDrivers/Documentation/MAX32650/group__uart.html

https://www.analog.com/media/en/technical-documentation/user-guides/max78000-user-guide.pdf

--------------------
Design
--------------------

***Wiring Diagram***

See file WiringDiagram.


***MPU Positioning***

See file BodyPlacement.


***Neural Network Architecture***

See imu.yaml in the Neural Network folder

SUMMARY OF OPS

Hardware: 1,715,382 ops (1,703,817 macc; 11,565 comp; 0 add; 0 mul; 0 bitwise)

    Layer 0 (trans_conv1_ConvTranspose_8): 622,080 ops (622,080 macc; 0 comp; 0 add; 0 mul; 0 bitwise)
    
    Layer 1 (trans_conv2_ConvTranspose_6): 663,552 ops (663,552 macc; 0 comp; 0 add; 0 mul; 0 bitwise)
    
    Layer 2 (conv1_Conv_6): 336,384 ops (331,776 macc; 4,608 comp; 0 add; 0 mul; 0 bitwise)
    
    Layer 3 (conv2_Conv_6): 88,704 ops (82,944 macc; 5,760 comp; 0 add; 0 mul; 0 bitwise)
    
    Layer 4 (conv3_Conv_6): 4,437 ops (3,240 macc; 1,197 comp; 0 add; 0 mul; 0 bitwise)
    
    Layer 5 (fc_Gemm_4): 225 ops (225 macc; 0 comp; 0 add; 0 mul; 0 bitwise)

RESOURCE USAGE
    
    Weight memory: 7,209 bytes out of 442,368 bytes total (1.6%)
    
    Bias memory:   50 bytes out of 2,048 bytes total (2.4%)

AIM

The neural network should be small, but this was a lot smaller than it could have been considering it takes up < 3% of the processor space.

Further work can be done in changing the model to a larger model.

However, irregardless of size, the network was able to have high accuracy with 8-bit quantization.

2025-05-05 01:05:35,825 - ==> Top1: 97.833    Loss: 0.083

2025-05-05 01:05:35,826 - ==> Confusion:
[[ 373    5    0    0   12]
 [   1 3259    1    0   93]
 [   0    4 2935    0    1]
 [   0    0    1  366    0]
 [   1   86    0    0 2324]]
